{
    "swagger": "2.0",
    "info": {
        "version": "1.0.0",
        "title": "DataGraft",
        "description": ""
    },
    "host": "127.0.0.1:3000",
    "schemes": [
        "http",
        "https"
    ],
    "securityDefinitions": {
        "GitHub access code": {
            "type": "oauth2",
            "scopes": {
                "user": "Grants read/write access to profile info only. Note that this scope includes user:email and user:follow.",
                "user:email": "Grants read access to a userâ€™s email addresses.",
                "user:follow": "Grants access to follow or unfollow other users."
            },
            "flow": "accessCode",
            "authorizationUrl": "https://github.com/login/oauth/authorize",
            "tokenUrl": "https://github.com/login/oauth/access_token"
        },
        "APIKey": {
            "type": "apiKey",
            "in": "header",
            "name": "X-user-token"
        }
    },
    "security": [
        {
            "GitHub access code": [
                "user",
                "user:email",
                "user:follow"
            ]
        },
        {
            "APIKey": []
        }
    ],
    "paths": {
        "/api_keys": {
            "get": {
                "description": "Get all of a user's API keys",
                "produces": [
                    "application/json"
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success in retrieving API keys"
                    }
                }
            },
            "post": {
                "description": "Create new API key",
                "produces": [
                    "application/json"
                ],
                "consumes": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "api_key",
                        "schema": {
                            "$ref": "#/definitions/APIKey"
                        },
                        "required": true
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully created API key"
                    }
                }
            }
        },
        "/api_keys/{id}": {
            "get": {
                "description": "Get the attributes of the API key",
                "produces": [
                    "application/json"
                ],
                "consumes": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID of the API key to be deleted",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully obtained info about API key"
                    }
                }
            },
            "patch": {
                "description": "Update an API key",
                "produces": [
                    "application/json"
                ],
                "consumes": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID of the API key to be updated",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "body",
                        "name": "api_key",
                        "schema": {
                            "$ref": "#/definitions/APIKeyPatch"
                        },
                        "required": true
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully updated API key"
                    }
                }
            },
            "delete": {
                "description": "Update an API key",
                "produces": [
                    "application/json"
                ],
                "consumes": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID of the API key to be deleted",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Successfully deleted API key"
                    }
                }
            }
        },
        "/{user}/data_distributions": {
            "get": {
                "description": "Obtain a list of all public data distributions for a user. If provided with an enabled API key for that user, returns also the private data distributions.",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "required": true,
                        "in": "path",
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved list of data distributions"
                    }
                }
            },
            "post": {
                "description": "TODO DUE TO SWAGGER BUG THIS NEEDS TO BE TESTED WITH THE AUTO-GENERATED CLIENTS! Create a new data distribution",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "required": true,
                        "in": "path",
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "public",
                        "required": false,
                        "type": "boolean"
                    },
                    {
                        "in": "formData",
                        "name": "name",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "code",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "file",
                        "required": false,
                        "type": "file"
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully created data distribution"
                    }
                }
            }
        },
        "/{user}/data_distributions/{id}": {
            "get": {
                "description": "Obtain the attributes of a data distribution",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "user",
                        "description": "User that the data distribution belongs to",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID (slug) of the data distribution to retrieve",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully obtained distribution"
                    }
                }
            },
            "put": {
                "description": "TO BE IMPLEMENTED - USE PATCH! Update a data distribution (replace the currently stored one with the one provided in the call)",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "user",
                        "description": "User that the data distribution belongs to",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID (slug) of the data distribution to change",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "public",
                        "required": true,
                        "type": "boolean"
                    },
                    {
                        "in": "formData",
                        "name": "name",
                        "required": true,
                        "type": "string",
                        "allowEmptyValue": true
                    },
                    {
                        "in": "formData",
                        "name": "code",
                        "required": true,
                        "type": "string",
                        "allowEmptyValue": true
                    },
                    {
                        "in": "formData",
                        "name": "file",
                        "required": true,
                        "type": "file",
                        "allowEmptyValue": true
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            },
            "patch": {
                "description": "TODO DUE TO SWAGGER BUG THIS NEEDS TO BE TESTED WITH THE AUTO-GENERATED CLIENTS! Update a data distribution (only change the properties provided in the call)",
                "parameters": [
                    {
                        "in": "path",
                        "name": "user",
                        "description": "Data distribution to change",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID (slug) of the data distribution to change",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "public",
                        "required": true,
                        "type": "boolean"
                    },
                    {
                        "in": "formData",
                        "name": "name",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "code",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "in": "formData",
                        "name": "file",
                        "required": false,
                        "type": "file"
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            },
            "delete": {
                "description": "Delete a data distribution",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "user",
                        "description": "User that the data distribution belongs to",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID (slug) of the data distribution to delete",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully deleted distribution"
                    }
                }
            }
        },
        "/{user}/transformations": {
            "get": {
                "description": "Obtain a list of all public transformations for a user. If provided with an enabled API key for that user, returns also the private transformations.",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "required": true,
                        "description": "ID of the user for whom to obtain the list",
                        "in": "path",
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved list of transformations"
                    }
                }
            },
            "post": {
                "description": "Creates a new transformation for the given user.",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "user",
                        "required": true,
                        "description": "ID of the user for whom to obtain the list",
                        "in": "path",
                        "type": "string"
                    },
                    {
                        "name": "transformation",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/Transformation"
                        },
                        "required": true
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Successfully created a transformation"
                    }
                }
            }
        },
        "/{user}/transformations/{id}": {
            "get": {
                "description": "Obtain the attributes of a transformation",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "user",
                        "description": "User that the transformation belongs to",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID (slug) of the transformation to retrieve",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully obtained transformation"
                    }
                }
            },
            "put": {
                "description": "TO BE IMPLEMENTED - USE PATCH! Update a transformation (replace the currently stored one with the one provided in the call)",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "user",
                        "description": "User that the transformation belongs to",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID (slug) of the transformation to change",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "transformation",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/Transformation"
                        },
                        "required": true
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            },
            "patch": {
                "description": "Update a transformation (only change the properties provided in the call)",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "user",
                        "description": "User that the transformation belongs to",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID (slug) of the transformation to change",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "transformation",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/Transformation"
                        },
                        "required": true
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                }
            },
            "delete": {
                "description": "Delete a transformation",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "user",
                        "description": "User that the transformation belongs to",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "id",
                        "description": "ID (slug) of the transformation to delete",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Successfully deleted transformation"
                    }
                }
            }
        },
        "/explore": {
            "get": {
                "description": "Get a list of all browsable public assets",
                "produces": [
                    "application/json"
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success in retrieving assets"
                    }
                }
            }
        },
        "/quotas": {
            "get": {
                "description": "Get information on the current quota of an authenticated user",
                "produces": [
                    "application/json"
                ],
                "security": [
                    {
                        "APIKey": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success in retrieving quota information"
                    }
                }
            }
        }
    },
    "definitions": {
        "User": {
            "required": [
                "email"
            ],
            "properties": {
                "username": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "organization": {
                    "type": "string",
                    "description": "Name of the organisation the user belongs to"
                },
                "place": {
                    "type": "string",
                    "description": "Address of the user"
                }
            }
        },
        "APIKey": {
            "required": [
                "enabled"
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "enabled": {
                    "type": "boolean"
                }
            }
        },
        "APIKeyPatch": {
            "properties": {
                "name": {
                    "type": "string"
                },
                "enabled": {
                    "type": "boolean"
                }
            }
        },
        "Transformation": {
            "properties": {
                "name": {
                    "type": "string"
                },
                "public": {
                    "type": "boolean"
                },
                "code": {
                    "type": "string",
                    "description": "JSON representation of a Grafterizer transformation"
                }
            }
        }
    }
}